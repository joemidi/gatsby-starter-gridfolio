"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};!function(){function t(n,t){function r(n,t){for(var r in n){var o=n[r];delete t[o.start],delete o.start,delete o.end,o.forEach(function(n){e[n<0?~n:n]=1}),u.push(o)}}var e={},o={},i={},u=[],f=-1;return t.forEach(function(r,e){var o,i=n.arcs[r<0?~r:r];i.length<3&&!i[1][0]&&!i[1][1]&&(o=t[++f],t[f]=r,t[e]=o)}),t.forEach(function(t){var r,e,u=function(t){var r,e=n.arcs[t<0?~t:t],o=e[0];return n.transform?(r=[0,0],e.forEach(function(n){r[0]+=n[0],r[1]+=n[1]})):r=e[e.length-1],t<0?[r,o]:[o,r]}(t),f=u[0],c=u[1];if(r=i[f])if(delete i[r.end],r.push(t),r.end=c,e=o[c]){delete o[e.start];var a=e===r?r:r.concat(e);o[a.start=r.start]=i[a.end=e.end]=a}else o[r.start]=i[r.end]=r;else if(r=o[c])if(delete o[r.start],r.unshift(t),r.start=f,e=i[f]){delete i[e.end];var s=e===r?r:e.concat(r);o[s.start=e.start]=i[s.end=r.end]=s}else o[r.start]=i[r.end]=r;else o[(r=[t]).start=f]=i[r.end=c]=r}),r(i,o),r(o,i),t.forEach(function(n){e[n<0?~n:n]||u.push([n])}),u}function r(n,r,e){var o=[];if(arguments.length>1){var i,u=function(n){var t=n<0?~n:n;(a[t]||(a[t]=[])).push({i:n,g:i})},f=function(n){n.forEach(u)},c=function(n){n.forEach(f)},a=[],s={LineString:f,MultiLineString:c,Polygon:c,MultiPolygon:function(n){n.forEach(c)}};!function n(t){"GeometryCollection"===t.type?t.geometries.forEach(n):t.type in s&&(i=t,s[t.type](t.arcs))}(r),a.forEach(arguments.length<3?function(n){o.push(n[0].i)}:function(n){e(n[0].g,n[n.length-1].g)&&o.push(n[0].i)})}else for(var l=0,p=n.arcs.length;l<p;++l)o.push(l);return{type:"MultiLineString",arcs:t(n,o)}}function e(r,e){function o(n){n.forEach(function(t){t.forEach(function(t){(f[t=t<0?~t:t]||(f[t]=[])).push(n)})}),c.push(n)}function u(n){return function(n){var t,r=-1,e=n.length,o=n[e-1],i=0;for(;++r<e;)t=o,o=n[r],i+=t[0]*o[1]-t[1]*o[0];return.5*i}(i(r,{type:"Polygon",arcs:[n]}).coordinates[0])>0}var f={},c=[],a=[];return e.forEach(function(n){"Polygon"===n.type?o(n.arcs):"MultiPolygon"===n.type&&n.arcs.forEach(o)}),c.forEach(function(n){if(!n._){var t=[],r=[n];for(n._=1,a.push(t);n=r.pop();)t.push(n),n.forEach(function(n){n.forEach(function(n){f[n<0?~n:n].forEach(function(n){n._||(n._=1,r.push(n))})})})}}),c.forEach(function(n){delete n._}),{type:"MultiPolygon",arcs:a.map(function(e){var o=[];if(e.forEach(function(n){n.forEach(function(n){n.forEach(function(n){f[n<0?~n:n].length<2&&o.push(n)})})}),o=t(r,o),(n=o.length)>1)for(var i,c=u(e[0][0]),a=0;a<n;++a)if(c===u(o[a])){i=o[0],o[0]=o[a],o[a]=i;break}return o})}}function o(n,t){var r={type:"Feature",id:t.id,properties:t.properties||{},geometry:i(n,t)};return null==t.id&&delete r.id,r}function i(n,t){function r(n,t){t.length&&t.pop();for(var r,e=s[n<0?~n:n],o=0,i=e.length;o<i;++o)t.push(r=e[o].slice()),c(r,o);n<0&&function(n,t){var r,e=n.length,o=e-t;for(;o<--e;)r=n[o],n[o++]=n[e],n[e]=r}(t,i)}function e(n){return n=n.slice(),c(n,0),n}function o(n){for(var t=[],e=0,o=n.length;e<o;++e)r(n[e],t);return t.length<2&&t.push(t[0].slice()),t}function i(n){for(var t=o(n);t.length<4;)t.push(t[0].slice());return t}function u(n){return n.map(i)}function f(n){var t=n.type;return"GeometryCollection"===t?{type:t,geometries:n.geometries.map(f)}:t in l?{type:t,coordinates:l[t](n)}:null}var c=a(n.transform),s=n.arcs,l={Point:function(n){return e(n.coordinates)},MultiPoint:function(n){return n.coordinates.map(e)},LineString:function(n){return o(n.arcs)},MultiLineString:function(n){return n.arcs.map(o)},Polygon:function(n){return u(n.arcs)},MultiPolygon:function(n){return n.arcs.map(u)}};return f(t)}function u(n,t){for(var r=0,e=n.length;r<e;){var o=r+e>>>1;n[o]<t?r=o+1:e=o}return r}function f(n){var t=n[0],r=n[1],e=n[2];return Math.abs((t[0]-e[0])*(r[1]-t[1])-(t[0]-r[0])*(e[1]-t[1]))}function c(n,t){return n[1][2]-t[1][2]}function a(n){if(!n)return s;var t,r,e=n.scale[0],o=n.scale[1],i=n.translate[0],u=n.translate[1];return function(n,f){f||(t=r=0),n[0]=(t+=n[0])*e+i,n[1]=(r+=n[1])*o+u}}function s(){}var l={version:"1.6.18",mesh:function(n){return i(n,r.apply(this,arguments))},meshArcs:r,merge:function(n){return i(n,e.apply(this,arguments))},mergeArcs:e,feature:function(n,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return o(n,t)})}:o(n,t)},neighbors:function(n){function t(n,t){n.forEach(function(n){n<0&&(n=~n);var r=o[n];r?r.push(t):o[n]=[t]})}function r(n,r){n.forEach(function(n){t(n,r)})}function e(n,t){"GeometryCollection"===n.type?n.geometries.forEach(function(n){e(n,t)}):n.type in f&&f[n.type](n.arcs,t)}var o={},i=n.map(function(){return[]}),f={LineString:t,MultiLineString:r,Polygon:r,MultiPolygon:function(n,t){n.forEach(function(n){r(n,t)})}};n.forEach(e);for(var c in o)for(var a=o[c],s=a.length,l=0;l<s;++l)for(var p=l+1;p<s;++p){var h,v=a[l],y=a[p];(h=i[v])[c=u(h,y)]!==y&&h.splice(c,0,y),(h=i[y])[c=u(h,v)]!==v&&h.splice(c,0,v)}return i},presimplify:function(n,t){function r(n){i.remove(n),n[1][2]=t(n),i.push(n)}var e=a(n.transform),o=function(n){if(!n)return s;var t,r,e=n.scale[0],o=n.scale[1],i=n.translate[0],u=n.translate[1];return function(n,f){f||(t=r=0);var c=(n[0]-i)/e|0,a=(n[1]-u)/o|0;n[0]=c-t,n[1]=a-r,t=c,r=a}}(n.transform),i=function(){function n(n,t){for(;t>0;){var r=(t+1>>1)-1,o=e[r];if(c(n,o)>=0)break;e[o._=t]=o,e[n._=t=r]=n}}function t(n,t){for(;;){var r=t+1<<1,i=r-1,u=t,f=e[u];if(i<o&&c(e[i],f)<0&&(f=e[u=i]),r<o&&c(e[r],f)<0&&(f=e[u=r]),u===t)break;e[f._=t]=f,e[n._=t=u]=n}}var r={},e=[],o=0;return r.push=function(t){return n(e[t._=o]=t,o++),o},r.pop=function(){if(!(o<=0)){var n,r=e[0];return--o>0&&(n=e[o],t(e[n._=0]=n,0)),r}},r.remove=function(r){var i,u=r._;if(e[u]===r)return u!==--o&&(i=e[o],(c(i,r)<0?n:t)(e[i._=u]=i,u)),u},r}();return t||(t=f),n.arcs.forEach(function(n){for(var u,f,c=[],a=0,s=0,l=n.length;s<l;++s)f=n[s],e(n[s]=[f[0],f[1],1/0],s);for(var s=1,l=n.length-1;s<l;++s)(u=n.slice(s-1,s+2))[1][2]=t(u),c.push(u),i.push(u);for(var s=0,l=c.length;s<l;++s)(u=c[s]).previous=c[s-1],u.next=c[s+1];for(;u=i.pop();){var p=u.previous,h=u.next;u[1][2]<a?u[1][2]=a:a=u[1][2],p&&(p.next=h,p[2]=u[2],r(p)),h&&(h.previous=p,h[0]=u[0],r(h))}n.forEach(o)}),n}};"function"==typeof define&&define.amd?define(l):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=l:this.topojson=l}();